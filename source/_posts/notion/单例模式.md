---
categories:
  - è®¾è®¡æ¨¡å¼
show_category: No
status: å¾…å‘å¸ƒ
title: å•ä¾‹æ¨¡å¼
---


<aside>

<img class="emoji" draggable="false" alt="ğŸ•¢" src="https://twemoji.maxcdn.com/v/13.1.0/72x72/1f562.png"/> é‡è¦ç¨‹åº¦ï¼š<img class="emoji" draggable="false" alt="â­ï¸" src="https://twemoji.maxcdn.com/v/13.1.0/72x72/2b50.png"/><img class="emoji" draggable="false" alt="â­ï¸" src="https://twemoji.maxcdn.com/v/13.1.0/72x72/2b50.png"/><img class="emoji" draggable="false" alt="â­ï¸" src="https://twemoji.maxcdn.com/v/13.1.0/72x72/2b50.png"/><img class="emoji" draggable="false" alt="â­ï¸" src="https://twemoji.maxcdn.com/v/13.1.0/72x72/2b50.png"/>
</aside>

# æ„å›¾

ç¡®ä¿ä¸€ä¸ªç±»åªç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚

## ç±»å›¾

![%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%20e5029fd8ac6240cf984df03ebbc823f8/Diagram.drawio.svg](/notion_images/b2860d46a7841743ebd80baf4b95b2dd.svg)

## å®ç°

é¥¿æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œåå¤„æ˜¯ä¸èŠ‚çº¦èµ„æºã€‚

```java
private static Singleton uniqueInstance = new Singleton();
```

æ‡’æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨çš„å†™æ³•ï¼Œå¥½å¤„æ˜¯èŠ‚çº¦èµ„æºï¼Œåå¤„æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œçº¿ç¨‹ä¼šé˜»å¡æ—¶é—´è¿‡é•¿ï¼Œæœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸å»ºè®®è¯•ç”¨è¯¥æ–¹æ³•ã€‚

```java
public static synchronized Singleton getUniqueInstance() {
    if (uniqueInstance == null) {
        uniqueInstance = new Singleton();
    }
    return uniqueInstance;
}
```

åŒé‡æ ¡éªŒé”ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„å†™æ³•ï¼Œè¿™ç§å†™æ³•é«˜å¹¶å‘ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä¹Ÿæ˜¯æ‡’åŠ è½½çš„ã€‚

```java
public class Singleton {

    private volatile static Singleton uniqueInstance;

    private Singleton() {
    }

    public static Singleton getUniqueInstance() {
        if (uniqueInstance == null) {
            synchronized (Singleton.class) {
                if (uniqueInstance == null) {
                    uniqueInstance = new Singleton();
                }
            }
        }
        return uniqueInstance;
    }
}
```

- volatileå…³é”®å­—å¯ä»¥é˜²æ­¢æŒ‡ä»¤é‡æ’åºã€‚
- `getUniqueInstance()` ä¸­ä¸¤ä¸ªifåˆ¤æ–­å¿…è¦çš„ï¼Œç¬¬ä¸€ä¸ªifé¿å…äº†å®ä¾‹åŒ–ä¹‹åçš„åŠ é”æ“ä½œï¼Œç¬¬äºŒä¸ªifé¿å…äº†å¤šä¸ªçº¿ç¨‹åŒæ—¶å®ä¾‹åŒ–çš„ç°è±¡ã€‚

é™æ€å†…éƒ¨ç±»å®ç°ï¼Œæ‡’åŠ è½½ï¼ŒJVMèƒ½å¤Ÿä¿è¯å®ä¾‹åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚

```java
public class Singleton {

    private Singleton() {
    }

    private static class SingletonHolder {
        private static final Singleton INSTANCE = new Singleton();
    }

    public static Singleton getUniqueInstance() {
        return SingletonHolder.INSTANCE;
    }
}
```

## ç°å®ä¸­ä½¿ç”¨çš„åœºæ™¯

- [java.lang.System#getSecurityManager()](http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getSecurityManager--)
- [å”¯ä¸€IDå·¥å…·-IdUtil](https://www.bookstack.cn/read/hutool/bfd2d43bcada297e.md)